<div class="md:w-1/0.2 bg-indigo-200 h-168 md:mx-30 m-10 rounded p-4 relative">
  <div class="flex justify-between">
    <div class="w-[50%]">
      <h3 class="text-indigo-700 text-2xl">List of customers</h3>
      <p class="opacity-30 text-sm">{{ allCustomers.length }} customers</p>
    </div>
    <div class="flex justify-between items-center w-[40%]">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        (ngModelChange)="onSearchChange()"
        placeholder="Search customers..."
        class="p-2 border rounded w-[60%]"
      />
      <div class="flex justify-between items-center p-3">
        <div class="flex items-center space-x-2">
          <!-- Gender Filter Dropdown -->
          <select
            class="p-2 border rounded"
            [(ngModel)]="selectedGender"
            (change)="onFilterChange()"
          >
            <option value="">All</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
          </select>
        </div>
      </div>
      <div
        (click)="showDialog()"
        class="bg-indigo-700 h-11 text-white items-center justify-center flex px-4 py-2 rounded hover:cursor-pointer w-40"
      >
        add customer
      </div>
    </div>
  </div>

  <div
    class="bg-indigo-100 opacity-30 h-10 rounded mt-2 mb-2 p-2 px-5 text-sm font-bold flex justify-between"
  >
    <div class="w-1/4 items-center">name</div>
    <div class="w-1/4 items-center">number</div>
    <div class="w-1/4 items-center">dob</div>
    <div class="w-1/4 items-center">Gender</div>
  </div>

  <div class="rounded h-125.5 p-4 mt-3">
    <app-customer-card
      *ngFor="let customer of customers"
      [customer]="customer"
      (deleteCustomer)="onDeleteCustomer($event)"
      (customerUpdated)="loadCustomers()"
    ></app-customer-card>
  </div>
  <!--pagination component--->
  <div class="absolute flex justify-center w-[100%]">
    <app-pagination
      [currentPage]="currentPage"
      [totalPages]="totalPages"
      (pageChanged)="onPageChanged($event)"
    ></app-pagination>
  </div>

  <!----add customers form--->
  <form [formGroup]="addCustomerForm" (ngSubmit)="onFormSubmit()">
    <div
      id="dialog"
      class="fixed left-0 top-0 bg-black/50 w-screen h-screen hidden opacity-0 flex justify-center items-center transition-opacity duration-500"
    >
      <div class="bg-white rounded shadow-md p-8 w-[40%]">
        <h1 class="mt-2 text-indigo-700">name</h1>
        <input
          placeholder="customer name"
          type="text"
          class="p-2 mt-2"
          formControlName="name"
        />
        <p
          class="text-red-500 text-sm mt-1"
          *ngIf="
            addCustomerForm.controls.name.touched &&
            addCustomerForm.controls.name.invalid
          "
        >
          Name is required.
        </p>
        <h1 class="mt-2 text-indigo-700">number</h1>
        <input
          placeholder="*********"
          (keypress)="validateNumberInput($event)"
          type="text"
          maxlength="9"
          class="p-2 mt-2 items-center"
          formControlName="number"
        />
        <p
          class="text-red-500 text-sm mt-1"
          *ngIf="
            addCustomerForm.controls.number.touched &&
            addCustomerForm.controls.number.hasError('required')
          "
        >
          Number is required.
        </p>
        <p
          class="text-red-500 text-sm mt-1"
          *ngIf="
            addCustomerForm.controls.number.touched &&
            addCustomerForm.controls.number.hasError('minlength')
          "
        >
          Number must be exactly 9 digits.
        </p>
        <div *ngIf="duplicateError" class="text-red-500">
          {{ duplicateErrorMessage }}
        </div>
        <h1 class="mt-2 text-indigo-700">Date of birth</h1>
        <input
          placeholder="yyyy-mm-dd"
          type="date"
          class="p-2 mt-2 text-gray-500"
          formControlName="dob"
          [max]="maxDate"
        />
        <p
          class="text-red-500 text-sm mt-1"
          *ngIf="
            addCustomerForm.controls.dob.touched &&
            addCustomerForm.controls.dob.invalid
          "
        >
          Date of birth is required.
        </p>
        <p
          class="text-red-500 text-sm"
          *ngIf="addCustomerForm.controls['dob'].hasError('futureDate')"
        >
          Future dates are not allowed.
        </p>
        <p class="mt-2 text-indigo-700">Gender</p>
        <div class="flex justify-around w-50 mt-2">
          <div>
             
            <input
              type="radio"
              id="M"
              name="gender"
              value="M"
              formControlName="gender"
            />
             
            <label for="M">M</label>
          </div>
          <div>
             
            <input
              type="radio"
              id="F"
              name="gender"
              value="F"
              formControlName="gender"
            />
             
            <label for="F">F</label>
          </div>
        </div>

        <div class="flex justify-end">
          <div class="mt-2 justify-around flex w-50">
            <button
              type="reset"
              (click)="hideDialog()"
              class="bg-gray-500 w-20 text-white px-4 py-2 rounded"
            >
              cancel
            </button>
            <button
              type="submit"
              class="bg-indigo-700 w-20 text-white px-4 py-2 rounded disabled:bg-gray-400 disabled:cursor-none"
              [disabled]="addCustomerForm.invalid"
            >
              ok
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
